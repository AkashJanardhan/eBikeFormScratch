<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>E-Bike Image Upload</title>
</head>
<body>

<h2>Upload E-Bike Image</h2>

<form id="uploadForm">
    <input type="file" id="imageFile" name="file">
    <button type="submit">Upload Image</button>
</form>

<script>
// Assuming you have an API endpoint from API Gateway
const apiEndpoint = 'YOUR_API_GATEWAY_ENDPOINT_HERE';

document.getElementById('uploadForm').onsubmit = async (e) => {
    e.preventDefault();
    
    const fileInput = document.getElementById('imageFile');
    if (fileInput.files.length > 0) {
        const file = fileInput.files[0];

        try {
            // Example: Fetching a presigned URL from your API
            const response = await fetch(apiEndpoint, {
                method: 'POST',
                // Additional headers or body may be required depending on your API configuration
            });

            const data = await response.json();
            const presignedUrl = data.url; // Ensure your API returns the presigned URL in this format

            // Use the presigned URL to upload the file directly to S3
            const uploadResponse = await fetch(presignedUrl, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'image/jpeg' // or the correct MIME type of your file
                },
                body: file
            });

            if (uploadResponse.ok) {
                alert('Image uploaded successfully.');
            } else {
                alert('Failed to upload the image.');
            }
        } catch (error) {
            console.error('Error uploading image:', error);
            alert('Error uploading the image.');
        }
    } else {
        alert('Please select a file to upload.');
    }
};
</script>

</body>
</html>
